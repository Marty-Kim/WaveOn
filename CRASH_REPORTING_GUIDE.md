# WaveOn 앱 크래시 리포팅 시스템 가이드

## 개요

WaveOn 앱에 강제 종료 시 스택트레이스와 로그를 자동으로 저장하고 확인할 수 있는 크래시 리포팅 시스템을 구현했습니다.

## 주요 기능

### 1. 자동 크래시 감지 및 저장
- `Thread.UncaughtExceptionHandler`를 사용하여 처리되지 않은 예외를 자동으로 감지
- 크래시 발생 시 스택트레이스, 디바이스 정보, 로그캣을 자동으로 수집
- SharedPreferences와 파일 시스템에 동시 저장

### 2. 크래시 리포트 화면
- 최근 크래시 정보 표시
- 크래시 로그 파일 목록 관리
- 상세 정보 보기 및 공유 기능
- 모든 로그 삭제 및 내보내기 기능

### 3. 테스트 기능
- 개발 중 크래시 시스템 테스트를 위한 테스트 크래시 발생 기능

## 사용법

### 1. 크래시 리포트 화면 접근
- MainActivity의 옵션 메뉴에서 "크래시 리포트" 선택
- 또는 직접 `CrashReportActivity` 실행

### 2. 크래시 정보 확인
- 최근 크래시 발생 시 자동으로 정보가 저장됨
- 앱 재실행 후 크래시 리포트 화면에서 확인 가능

### 3. 로그 파일 관리
- 각 크래시마다 별도의 텍스트 파일로 저장
- 파일명 형식: `crash_[ID]_[날짜시간].txt`
- 파일 내용: 크래시 정보, 디바이스 정보, 스택트레이스, 로그캣

### 4. 테스트 크래시 발생
- 크래시 리포트 화면에서 "테스트 크래시 발생" 버튼 클릭
- 의도적으로 RuntimeException을 발생시켜 크래시 시스템 테스트

## 구현된 클래스들

### CrashReporter
- 싱글톤 패턴으로 구현
- 크래시 감지 및 데이터 수집 담당
- SharedPreferences와 파일 시스템에 데이터 저장

### CrashReportActivity
- Compose로 구현된 크래시 리포트 화면
- 크래시 정보 표시 및 관리 기능

### CrashReportViewModel
- MVVM 패턴의 ViewModel
- 크래시 데이터 로딩 및 UI 상태 관리

## 저장되는 정보

### 크래시 정보
- 크래시 ID (UUID 기반)
- 발생 시간
- 스레드 이름
- 예외 타입 및 메시지

### 디바이스 정보
- 제조사 및 모델
- Android 버전
- SDK 버전
- 앱 버전

### 로그 정보
- 전체 스택트레이스
- 최근 로그캣 (1000줄)

## 파일 저장 위치

- 앱 내부 저장소: `files/crash_logs/`
- SharedPreferences: `crash_reporter_prefs`

## 주의사항

1. **권한**: 로그캣 수집을 위해 `READ_LOGS` 권한이 필요할 수 있음
2. **성능**: 크래시 발생 시 파일 저장으로 인한 지연 가능성
3. **저장 공간**: 크래시 로그 파일이 누적될 수 있으므로 주기적 정리 필요
4. **보안**: 민감한 정보가 로그에 포함될 수 있으므로 주의

## 향후 개선 사항

1. **원격 서버 전송**: 크래시 데이터를 서버로 자동 전송
2. **크래시 분석**: 크래시 패턴 분석 및 통계 기능
3. **자동 복구**: 특정 크래시에 대한 자동 복구 메커니즘
4. **사용자 피드백**: 크래시 발생 시 사용자 피드백 수집

## 테스트 방법

1. 앱 실행
2. MainActivity 옵션 메뉴에서 "크래시 리포트" 선택
3. "테스트 크래시 발생" 버튼 클릭
4. 앱 재실행 후 크래시 리포트 화면에서 저장된 정보 확인 